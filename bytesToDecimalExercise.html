<html>
    <body>
        <h1>Bytes to Decimal Exercise</h1>
        <div id="question">
        </div>
        <div id="byte">
        </div>
        <br/>
        <div id="result">
        </div>
        <button style="margin-right:10px;" id="submit" onclick="byteToDecimal();">Submit</button>
        <button id="reset" onclick="buildQuestion(); resetBits();">Reset</button>
        <script>
            function buildInputs(){
                let count=1;
                while(count<=7){
                    let input = Object.assign(document.createElement("input"),{
                        className:"bit",
                        max: 1,
                        min: 0,
                        type: "number"
                    });
                    input.value="0";
                    document.querySelector("#byte").append(input);
                    count++;
                }
            }

            function byteToDecimal(){
                let result = 0
                let bits = document.querySelectorAll(".bit");
                for(let i = 0 ; i < bits.length; i++ ){
                    if(bits[i].value==1){
                        result = result + Math.pow(2, (bits.length-1)-i);
                    }
                }

                let msg = "";

                if(result==random){
                    msg = "Correct, You got it!";
                }
                else{
                    msg = "Incorrect, Try again!";
                }

                document.querySelector("#result").innerHTML = msg + "<br/>Your byte value is: " + result + "</br></br>";
            }

            let random = 0;
            
            function buildQuestion(){
                random = Math.floor(Math.random() * 129);
                document.querySelector("#question").innerHTML = "<h3>Write the number "+random+" in bytes.</h3>";
                document.querySelector("#result").innerHTML = "";
            }

            function resetBits(){
                let bits = document.querySelectorAll(".bit");
                bits.forEach((bit) => {
                    bit.value = 0;
                });
            }

            buildInputs();
            buildQuestion();

        </script>
    </body>
</html>